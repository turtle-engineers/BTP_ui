<template>
  <body>
    <simpleheader></simpleheader>
    <div class="btp-container">
      <section class="btp-title">
        <h1>ì•ŒëŒ ì„¤ì •</h1>
        <p>
          í•˜ë£¨ë™ì•ˆ ë°›ì„ ìŠ¤íŠ¸ë ˆì¹­ ì•ŒëŒì„ ì„¤ì •í•´ë³´ì„¸ìš”. <br />
          ì•ŒëŒì´ ìš¸ë¦¬ë©´ ìŠ¤íŠ¸ë ˆì¹­ì„ í•˜ê³  ê±°ë¶ëª©ê³¼ ì–´ê¹¨ë¥¼ ì­‰ì­‰ í´ì£¼ì„¸ìš”.
        </p>
      </section>
      <!-- ì•ŒëŒ (ì´ˆë¡) -->
      <div class="alarm-wrap">
        <section class="alarm-stretching alarm-container">
          <dl>
            <dt>ìŠ¤íŠ¸ë ˆì¹­ ì•Œë¦¼</dt>
            <dd>ì„¤ì •í•œ ì‹œê°„ ë™ì•ˆ ë§¤ ì •ê°ë§ˆë‹¤ ì•Œë¦¼ì´ ìš¸ë¦½ë‹ˆë‹¤.</dd>
          </dl>
          <!-- on offë²„íŠ¼ -->
          <div v-on:change="onoff" class="onoff-button">
            <input type="checkbox" id="stretching-switch" />
            <label for="stretching-switch"></label>
          </div>
          <div class="weekcheck">
            <h2>ìš”ì¼ ì„ íƒ</h2>
            <article @change="weekcheck" v-on:change="updateIsChecked">
              <!-- v-on:change="updateIsChecked" -->
              <input type="checkbox" value="0" id="mon" name="dayAlarmOnOff" />
              <label class="weekday" for="mon">ì›”</label>
              <input type="checkbox" value="1" id="tue" name="dayAlarmOnOff" />
              <label class="weekday" for="tue">í™”</label>
              <input type="checkbox" value="2" id="wed" name="dayAlarmOnOff" />
              <label class="weekday" for="wed">ìˆ˜</label>
              <input type="checkbox" value="3" id="thu" name="dayAlarmOnOff" />
              <label class="weekday" for="thu">ëª©</label>
              <input type="checkbox" value="4" id="fri" name="dayAlarmOnOff" />
              <label class="weekday" for="fri">ê¸ˆ</label>
              <input type="checkbox" value="5" id="sat" name="dayAlarmOnOff" />
              <label class="weekday" for="sat">í† </label>
              <input type="checkbox" value="6" id="sun" name="dayAlarmOnOff" />
              <label class="weekday" for="sun">ì¼</label>
            </article>
          </div>

          <form>
            <fieldset>
              <legend>ì‹œì‘ ì‹œê°</legend>
              <select name="start-clock">
                <option value="" selected disabled hidden>00:00</option>
                <option value="0000">00:00</option>
                <option value="0100">01:00</option>
                <option value="0200">02:00</option>
                <option value="0300">03:00</option>
                <option value="0400">04:00</option>
                <option value="0500">05:00</option>
                <option value="0600">06:00</option>
                <option value="0700">07:00</option>
                <option value="0800">08:00</option>
                <option value="0900">09:00</option>
                <option value="1000">10:00</option>
                <option value="1100">11:00</option>
                <option value="1200">12:00</option>
                <option value="1300">13:00</option>
                <option value="1400">14:00</option>
                <option value="1500">15:00</option>
                <option value="1600">16:00</option>
                <option value="1700">17:00</option>
                <option value="1800">18:00</option>
                <option value="1900">19:00</option>
                <option value="2000">20:00</option>
                <option value="2100">21:00</option>
                <option value="2200">22:00</option>
                <option value="2300">23:00</option>
                <option value="2400">24:00</option>
              </select>
            </fieldset>
            <fieldset>
              <legend>ì¢…ë£Œ ì‹œê°</legend>
              <select name="end-clock">
                <option value="" selected disabled hidden>00:00</option>
                <option value="0000">00:00</option>
                <option value="0100">01:00</option>
                <option value="0200">02:00</option>
                <option value="0300">03:00</option>
                <option value="0400">04:00</option>
                <option value="0500">05:00</option>
                <option value="0600">06:00</option>
                <option value="0700">07:00</option>
                <option value="0800">08:00</option>
                <option value="0900">09:00</option>
                <option value="1000">10:00</option>
                <option value="1100">11:00</option>
                <option value="1200">12:00</option>
                <option value="1300">13:00</option>
                <option value="1400">14:00</option>
                <option value="1500">15:00</option>
                <option value="1600">16:00</option>
                <option value="1700">17:00</option>
                <option value="1800">18:00</option>
                <option value="1900">19:00</option>
                <option value="2000">20:00</option>
                <option value="2100">21:00</option>
                <option value="2200">22:00</option>
                <option value="2300">23:00</option>
                <option value="2400">24:00</option>
              </select>
            </fieldset>
          </form>
        </section>
        <!-- ì•ŒëŒ(íŒŒë‘) -->
        <section class="alarm-challenge alarm-container">
          <dl>
            <dt>ëœë¤ ì±Œë¦°ì§€ ì•Œë¦¼</dt>
            <dd>
              ìŠ¤íŠ¸ë ˆì¹­ ì•Œë¦¼ì„ ë°›ê¸°ë¡œ ì„¤ì •í•œ ì‹œê°„ë™ì•ˆ <br />
              ë§¤ ì •ê°ë§ˆë‹¤ ì•Œë¦¼ì´ ìš¸ë¦½ë‹ˆë‹¤.
            </dd>
          </dl>
          <div v-on:change="onoff" class="onoff-button">
            <input type="checkbox" id="challenge-switch" />
            <label for="challenge-switch"></label>
          </div>
          <dl class="sub-title">
            <dt>ëœë¤ ì±Œë¦°ì§€ë€?</dt>
            <dd>
              ì•„ë˜ì˜ ì˜ˆì‹œì²˜ëŸ¼ ì ê¹ ë™ì•ˆì˜ íœ´ì‹ì„<br />
              ìƒê¸° ì‹œì¼œì£¼ëŠ” ì•Œë¦¼ì…ë‹ˆë‹¤.
            </dd>
          </dl>
          <div class="random-challenge">
            <span>
              ğŸ’¦(ì˜ˆì‹œ) 1ì‹œê°„ì´ ì§€ë‚¬ì–´ìš”. ğŸ’¦<br />
              ë¬¼ì„ í•œì” ë§ˆì…” ë³¼ê¹Œìš”?
            </span>
          </div>
        </section>
        <section class="alarm-scientist alarm-container">
          <img src="../assets/images/alarm-circle.png" alt="ì•ŒëŒ ì›" />
          <img src="../assets/images/alarm-scientist.png" alt="ì•ŒëŒ ê³¼í•™ì" />
          <img src="../assets/images/alarm-balloon.png" alt="ì•ŒëŒ ë§í’ì„ " />
        </section>
      </div>
    </div>
  </body>
</template>
<style lang="scss" scoped>
@import "@/assets/scss/variables.scss";
@import "@/assets/scss/common.scss";
@import "@/assets/scss/components/myAlarm.scss";
</style>
<script>
import simpleheader from "../components/layout/simpleheader.vue";
import axios from "axios";
export default {
  data() {
    return {
      // isChecked: false,
      isChecked: [1, 0, 0, 0, 0, 0, 0],
    };
  },
  components: {
    simpleheader,
  },
  created() {
    this.getAlarm();
  },
  // mounted() {
  //   this.addTimeOption();
  // },
  methods: {
    // addTimeOption() {
    //   let selectbox = document.querySelectorAll("select");
    //   //forë¬¸ìœ¼ë¡œ 0ë¶€í„° 24ê¹Œì§€ optionì„ ë”í•œë‹¤
    //   for (let i = 0; i <= 24; i++) {
    //     let result = i.toString().padStart(2, "0");
    //     //ë‹¨, valueëŠ” nn00 ë¡œ. ê¸€ì€ nn:00 ë¡œ.
    //     const value = `${result}00`;
    //     const text = `${result}:00`;
    //     //ì˜µì…˜ ë§Œë“¤ì–´ì„œ ì„¤ì •
    //     const option = document.createElement("option");
    //     option.innerText = text;
    //     option.value = value;
    //     selectbox.forEach((element) => {
    //       element.appendChild(option);
    //       console.log(element);
    //     });
    //   }
    // },
    onoff() {
      //validì— checked(true, false)ê°’ ë„£ê¸°
      axios
        .put("http://127.0.0.1:3000/user/alarm", {
          "valid": (document.getElementById("stretching-switch").checked ? '1' : '0'),
        })
        .then(function(response) {
          console.log(response);
        });
      // í™•ì¸ìš©
      axios.get("http://127.0.0.1:3000/user/alarm").then((res) => {
        if (res.data != null) {
          console.log("ë°ì´í„°:", res.data.results);
        }
      });
      console.log(
        "checked?:" + document.getElementById("stretching-switch").checked
      );

      

      // console.log(document.getElementById('challenge-switch').checked);
    },
    weekcheck() {
      //ë°”ë€”ë•Œë§ˆë‹¤ ë¹ˆ ë°°ì—´ì—  ê° result[value]ë¥¼ 01ë¡œ (checkedë¡œ) ë„£ìŒ
      let result = document.querySelectorAll("input[name=dayAlarmOnOff]");
        // console.log(result);
      result.forEach((element) => {
        this.isChecked[element.value] = (element.checked ? 1 : 0);
      });
    },
    getAlarm() {
      axios.get("http://127.0.0.1:3000/user/alarm").then((res) => {
        if (res.data != null) {
          const weekData = res.data.results;
          //dayê°€ 111000 stringìœ¼ë¡œ ì˜¤ë¯€ë¡œ ë°°ì—´ë¡œ ë°”ê¾¸ê¸°
          this.isChecked = weekData.day
            .split("")
            .map((element) => parseInt(element));
        }
        this.updateIsChecked();
      });
    },
    updateIsChecked() { //ì¹¼ë¼ ì—…ë°ì´íŠ¸
      console.log(this.isChecked);
      let result = document.querySelectorAll("input[name=dayAlarmOnOff]");
        // console.log(result);
      result.forEach((element) => {
        this.isChecked[element.value] ? (element.checked = true) : (element.checked = false);
        console.log(element.value +':'+ element.checked);
      });
    }
  },
};
</script>
